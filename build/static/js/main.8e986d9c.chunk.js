(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(t,e,i){t.exports=i(35)},32:function(t,e,i){},34:function(t,e,i){},35:function(t,e,i){"use strict";i.r(e);var n,r,a,o,s,c=i(0),u=i.n(c),f=i(10),l=i.n(f),y=(i(32),i(3)),b=i(5),v=i(6),h=i(16),x=i(11),m=i(17),O=i(12),_=function(t){function e(){return Object(b.a)(this,e),Object(h.a)(this,Object(x.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(v.a)(e,[{key:"render",value:function(){var t=this.props.brick;return u.a.createElement("div",{className:"brick",style:{background:t.color}})}}]),e}(c.Component),k=Object(O.a)(_),p=function(t){function e(){return Object(b.a)(this,e),Object(h.a)(this,Object(x.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(v.a)(e,[{key:"render",value:function(){var t=this.props.bricks;return u.a.createElement("div",{className:"game-board"},t.map(function(t){return u.a.createElement(k,{key:t.id,brick:t})}))}}]),e}(c.Component),g=Object(O.a)(p),d=i(18),j=i(19),w=(i(26),i(1)),P=i(40),S=i(39),E=i(38);!function(t){t[t.Stop=0]="Stop",t[t.Play=1]="Play",t[t.Pause=2]="Pause",t[t.Finish=3]="Finish"}(n||(n={})),function(t){t.Brick="black",t.Figure="orange"}(r||(r={})),function(t){t[t.Gun=0]="Gun",t[t.Flug=1]="Flug",t[t.Duck=2]="Duck",t[t.Leg=3]="Leg",t[t.Post=4]="Post",t[t.Stick=5]="Stick",t[t.Snake=6]="Snake",t[t.Hump=7]="Hump",t[t.Wall=8]="Wall",t[t.Pyramid=9]="Pyramid",t[t.Nose=10]="Nose",t[t.Table=11]="Table",t[t.Lover=12]="Lover"}(a||(a={})),function(t){t[t.Play=13]="Play",t[t.Right=39]="Right",t[t.Left=37]="Left",t[t.Down=40]="Down",t[t.Rotate=38]="Rotate"}(o||(o={}));var B,F,N,R,C,I,L=10,D=20,A=0,G=1,T=(s={},Object(y.a)(s,a.Duck,a.Flug),Object(y.a)(s,a.Flug,a.Gun),Object(y.a)(s,a.Gun,a.Leg),Object(y.a)(s,a.Leg,a.Duck),Object(y.a)(s,a.Stick,a.Post),Object(y.a)(s,a.Post,a.Stick),Object(y.a)(s,a.Snake,a.Hump),Object(y.a)(s,a.Hump,a.Snake),Object(y.a)(s,a.Pyramid,a.Nose),Object(y.a)(s,a.Nose,a.Table),Object(y.a)(s,a.Table,a.Lover),Object(y.a)(s,a.Lover,a.Pyramid),Object(y.a)(s,a.Wall,a.Wall),s),M=[[{x:0,y:0},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1}],[{x:1,y:0},{x:1,y:-1},{x:1,y:-2},{x:0,y:-2}],[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:2,y:-1}],[{x:0,y:0},{x:0,y:-1},{x:0,y:-2},{x:1,y:0}],[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:3,y:0}],[{x:0,y:0},{x:0,y:-1},{x:0,y:-2},{x:0,y:-3}],[{x:1,y:0},{x:2,y:0},{x:0,y:-1},{x:1,y:-1}],[{x:0,y:0},{x:0,y:-1},{x:1,y:-1},{x:1,y:-2}],[{x:0,y:0},{x:1,y:0},{x:0,y:-1},{x:1,y:-1}],[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:1,y:-1}],[{x:1,y:0},{x:1,y:-1},{x:1,y:-2},{x:0,y:-1}],[{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:1,y:0}],[{x:0,y:0},{x:0,y:-1},{x:0,y:-2},{x:1,y:-1}]],z=(B=function(){function t(e,i,n){Object(b.a)(this,t),this._id=0,this._active=!0,this._position={x:0,y:0},Object(d.a)(this,"_color",F,this),this._id=n,this._position.x=e,this._position.y=i}return Object(v.a)(t,[{key:"setActive",value:function(t){this._active=t}},{key:"setColor",value:function(t){this._color=t}},{key:"isInPosition",value:function(t){var e=t.x,i=t.y;return this._position.x===e&&this._position.y===i}},{key:"id",get:function(){return this._id}},{key:"x",get:function(){return this._position.x}},{key:"y",get:function(){return this._position.y}},{key:"color",get:function(){return this._color}},{key:"active",get:function(){return this._active}}],[{key:"initGameBoard",value:function(e){for(var i=0,n=1;n<D+1;++n)for(var r=1;r<L+1;++r)e["".concat(r,":").concat(n)]=new t(r,n,i++)}},{key:"removeCompletedRows",value:function(t){for(var e=function(e){for(var i=e;i>1;--i)for(var n=1;n<L+1;++n){var r=t["".concat(n,":").concat(i)],a=t["".concat(n,":").concat(i-1)];r.setColor(a.color),r.setActive(a.active)}},i=function(i){for(;;){if(Object.values(t).filter(function(t){return t.y===i&&!t.active}).length<L)break;e(i)}},n=D;n>=1;--n)i(n)}},{key:"reset",value:function(t){var e=!0,i=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;s.setActive(!0),s.setColor(r.Brick)}}catch(c){i=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}}}]),t}(),F=Object(j.a)(B.prototype,"_color",[w.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r.Brick}}),B),H=function(){function t(){var e=this;Object(b.a)(this,t),this._position={x:5,y:1},this._name=t.getRandomName(),this.move=function(t){var i=t.x,n=t.y;e._position.x=i,e._position.y=n},this.rotate=function(){var i=T[e._name];if(void 0!==i){var n=t.calcRotateOffset(i);e._position.x+=n.xOffset,e._position.y+=n.yOffset,e._name=i}},this.offsetPositions=function(t){var i=t.x,n=t.y;return e.positions.map(function(t){return{x:t.x+i,y:t.y+n}})}}return Object(v.a)(t,[{key:"init",value:function(){this._name=t.getRandomName(),this._position.x=Math.floor(L/2),this._position.y=0}},{key:"x",get:function(){return this._position.x}},{key:"y",get:function(){return this._position.y}},{key:"positions",get:function(){return M[this._name]}},{key:"ifRotatePositions",get:function(){var e=this,i=T[this._name],n=M[i],r=t.calcRotateOffset(i);return n.map(function(t){return{x:t.x+e.x+r.xOffset,y:t.y+e.y+r.yOffset}})}}],[{key:"getRandomName",value:function(){return Math.floor(Math.random()*M.length)}},{key:"calcRotateOffset",value:function(t){var e=0,i=0;return t===a.Stick&&(e+=1,i+=2),t===a.Post&&(e-=1,i-=2),{xOffset:e,yOffset:i}}}]),t}(),W=300,U=200,V=(N=function(){function t(){var e=this;Object(b.a)(this,t),this._keydownSubscription=void 0,this._updateSubscription=void 0,this._xOffset=A,this._yOffset=G,Object(d.a)(this,"_state",R,this),Object(d.a)(this,"_bricks",C,this),Object(d.a)(this,"_figure",I,this),this.initKeyPressSubscriber=function(){e._keydownSubscription=Object(P.a)(document,"keydown").pipe(Object(E.a)(function(t){return Object(S.a)(U)})).subscribe(function(t){t.keyCode===o.Play&&e._state!==n.Play?e.initUpdateInterval():e.setOffset(t.keyCode)})},this.setOffset=function(t){switch(t){case o.Left:e._xOffset=-1,e._yOffset=0;break;case o.Right:e._xOffset=1,e._yOffset=0;break;case o.Down:e._yOffset=2;break;case o.Rotate:e._xOffset=0,e._yOffset=0,e.rotateFigure()}},this.initUpdateInterval=function(){e._state=n.Play,z.reset(e.allInactiveBricks),e._updateSubscription=Object(S.a)(W).subscribe(function(){return e.update()})},this.update=function(){e.moveFigure(),e.drawFigure(),e.canMoveDown()||e.setNewFigure()},this.rotateFigure=function(){var t=e._figure.ifRotatePositions,i=e.hasCollision({x:e._figure.x,y:e._figure.y},t),n=e.isPositionsInBoard(t);!i&&n&&e._figure.rotate(),e.resetOffsetValues()},this.moveFigure=function(){var t=e._figure.x+e._xOffset,i=e._figure.y+e._yOffset,n=e._figure.offsetPositions({x:t,y:i}),r=e.hasCollision({x:t,y:i},n),a=e.isPositionsInBoard(n);!r&&a&&e._figure.move({x:t,y:i}),e.resetOffsetValues()},this.hasCollision=function(t,i){var n=!0,r=!1,a=void 0;try{for(var o,s=function(){var t=o.value;if(i.find(function(e){return t.isInPosition(e)}))return{v:!0}},c=e.allInactiveBricks[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var u=s();if("object"===typeof u)return u.v}}catch(f){r=!0,a=f}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return!1},this.isPositionsInBoard=function(t){return!t.find(function(t){return t.x<1||t.x>L||t.y>D})},this.canMoveDown=function(){var t=e._figure.x,i=e._figure.y+G;if(i>D)return!1;var n=e._figure.offsetPositions({x:t,y:i});return!e.hasCollision({x:t,y:i},n)},this.resetOffsetValues=function(){e._xOffset=A,e._yOffset=G},this.drawFigure=function(){var t=!0,i=!1,n=void 0;try{for(var a,o=e.allActiveBricks[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;s.setColor(r.Brick);var c=!0,u=!1,f=void 0;try{for(var l,y=e._figure.positions[Symbol.iterator]();!(c=(l=y.next()).done);c=!0){var b=l.value;s.isInPosition({x:b.x+e._figure.x,y:b.y+e._figure.y})&&s.setColor(r.Figure)}}catch(v){u=!0,f=v}finally{try{c||null==y.return||y.return()}finally{if(u)throw f}}}}catch(v){i=!0,n=v}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}},this.setNewFigure=function(){e.allActiveBricks.filter(function(t){return t.color===r.Figure}).forEach(function(t){return t.setActive(!1)}),e._figure.y<=1?(e._state=n.Finish,e._updateSubscription.unsubscribe()):e._figure.init(),z.removeCompletedRows(e._bricks)},z.initGameBoard(this._bricks),this.initKeyPressSubscriber()}return Object(v.a)(t,[{key:"state",get:function(){return this._state}},{key:"allBricks",get:function(){return Object.values(this._bricks)}},{key:"allActiveBricks",get:function(){return this.allBricks.filter(function(t){return t.active})}},{key:"allInactiveBricks",get:function(){return this.allBricks.filter(function(t){return!t.active})}}]),t}(),R=Object(j.a)(N.prototype,"_state",[w.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n.Stop}}),C=Object(j.a)(N.prototype,"_bricks",[w.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),I=Object(j.a)(N.prototype,"_figure",[w.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new H}}),N),J=function(t){function e(){var t,i,r;Object(b.a)(this,e);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(r=Object(h.a)(this,(t=Object(x.a)(e)).call.apply(t,[this].concat(o)))).store=new V,r.messages=(i={},Object(y.a)(i,n.Stop,"Press Enter to start the game"),Object(y.a)(i,n.Finish,"Game over"),i),r}return Object(m.a)(e,t),Object(v.a)(e,[{key:"render",value:function(){return u.a.createElement("div",{className:"container"},u.a.createElement(g,{bricks:this.store.allBricks}),u.a.createElement("div",{className:"title"},u.a.createElement("h1",null,"TETRIS"),u.a.createElement("div",{className:"message"},this.messages[this.store.state]||""),u.a.createElement("div",{className:"instruction"},this.store.state===n.Stop&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"button"},"Left"),u.a.createElement("div",null,u.a.createElement("div",{className:"button"},"Up"),u.a.createElement("div",{className:"button"},"Down")),u.a.createElement("div",{className:"button"},"Right")))))}}]),e}(c.Component),K=Object(O.a)(J);i(34);var q=function(){return u.a.createElement(K,null)};l.a.render(u.a.createElement(q,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.8e986d9c.chunk.js.map